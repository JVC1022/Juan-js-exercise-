<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Market Status (JSON)</title>
</head>
<body>

    <h1>Market Status (JSON)</h1>
    <a href="../index.html">Home</a>

    <h2>Dataset Information</h2>
    <p>
        This exercise uses a simulated dataset for market status information.
    </p>

    <h2>Part 1</h2>
    <ol type="A">
        <li>Fetch market status data from the simulated dataset.</li>
        <li>Display the number of markets.</li>
        <li>Filter markets with market type "Equity" into a variable called <code>equityMarkets</code>.</li>
        <li>Display the number of equity markets.</li>
        <li>Loop through the equity markets and log their market type and region.</li>
        <li>Find the equity market with region "United States" and store it in <code>market</code>.</li>
        <li>Log the US market info (type, exchanges, open/close, and capitalized status).</li>
    </ol>

    <h2>Part 2</h2>
    <ol type="A">
        <li>Use the provided <code>span</code> elements to display the US market's region, market type,
            primary exchanges, local open/close times, and status.</li>
    </ol>

    <hr>
    <h2>Display</h2>

    <div id="display-market-info">
        <p>Region: <span id="display-region">TODO</span></p>
        <p>Market Type: <span id="display-type">TODO</span></p>
        <p>Primary Exchanges: <span id="display-exchanges">TODO</span></p>
        <p>Local Open: <span id="display-open">TODO</span></p>
        <p>Local Close: <span id="display-close">TODO</span></p>
        <p>Current Status: <span id="display-status">TODO</span></p>
    </div>

    <script type="text/javascript">
        // Simulated dataset
        const simulatedData = {
            markets: [
                {
                    region: "United States",
                    market_type: "Equity",
                    primary_exchanges: ["NYSE", "NASDAQ"],
                    local_open: "09:30 AM",
                    local_close: "04:00 PM",
                    current_status: "open"
                },
                {
                    region: "Europe",
                    market_type: "Equity",
                    primary_exchanges: ["Euronext", "LSE"],
                    local_open: "08:00 AM",
                    local_close: "04:30 PM",
                    current_status: "closed"
                }
            ]
        };

        console.log("---------------------");
        console.log("PART 1...");

        const markets = simulatedData.markets || [];
        console.log("Total markets:", markets.length);

        const equityMarkets = markets.filter(m => m.market_type === "Equity");
        console.log("Equity markets:", equityMarkets.length);

        equityMarkets.forEach(m => {
            console.log(`Market Type: ${m.market_type}, Region: ${m.region}`);
        });

        const market = equityMarkets.find(m => m.region === "United States");

        if (market) {
            console.log("US Market Info:", {
                type: market.market_type,
                exchanges: market.primary_exchanges,
                open: market.local_open,
                close: market.local_close,
                status: market.current_status?.toUpperCase()
            });

            console.log("---------------------");
            console.log("PART 2...");

            document.getElementById("display-region").textContent = market.region || "N/A";
            document.getElementById("display-type").textContent = market.market_type || "N/A";
            document.getElementById("display-exchanges").textContent = (market.primary_exchanges || []).join(", ") || "N/A";
            document.getElementById("display-open").textContent = market.local_open || "N/A";
            document.getElementById("display-close").textContent = market.local_close || "N/A";
            document.getElementById("display-status").textContent = market.current_status?.toUpperCase() || "N/A";
        } else {
            console.warn("No US equity market found.");
        }
    </script>
</body>
</html>
